<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="alternate icon" href="/static/favicon.svg">
    <title>Hearts Game</title>
    <link rel="stylesheet" href="hearts-game.css">

</head>

<body>
    <div class="header">
        <div id="scoreboard" style="position:absolute;top:12px;left:12px;background:rgba(30,30,30,0.95);color:#fff;padding:10px 18px;border-radius:10px;box-shadow:0 2px 10px #0006;z-index:3000;min-width:200px;font-size:0.9em;">
            <h3 style="margin-top:0;margin-bottom:8px;font-size:1.05em;text-align:center;">Scoreboard</h3>
            <div id="scoreboard-rows"></div>
        </div>
        
        <!-- Disconnect countdown timer -->
        <div id="disconnect-countdown" class="disconnect-countdown hidden">
            <div>‚ö†Ô∏è Players Disconnected</div>
            <div>Game will end in: <span id="countdown-timer" class="countdown-timer">--</span></div>
        </div>
        
        <h1 style="position:absolute;left:50%;transform:translateX(-50%);margin:0;">‚ô•Ô∏è Hearts Game</h1>
        <div class="user-info" style="position:absolute;right:0;top:50%;transform:translateY(-50%);">
            <span id="user-name">Loading...</span>
            <div id="connection-status" class="connection-status disconnected">
                Connecting...
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- <h2 class="lobby-title" style="margin-bottom:0.5rem;">Game Lobby</h2>
        <p class="lobby-subtitle" style="margin-bottom:1.5rem;">Take a seat and get ready to play Hearts!</p> -->
        <div id="game-state-header" class="hidden" style="margin-bottom:1.2rem;">
            <h2 style="margin-bottom:0.3rem;">Game in Progress</h2>
            <div id="game-state-label" style="font-size:1.2rem;font-weight:500;letter-spacing:0.5px;"></div>
        </div>
        
        <!-- Lobby leader controls - moved outside game area for better visibility -->
        <div id="lobby-leader-controls" class="lobby-leader-controls hidden" style="margin-bottom:1rem;">
            <button id="stop-game-btn" class="stop-game-btn">
                Stop Game
            </button>
        </div>
        
        <div class="game-area">
            <div id="lobby-section" class="lobby-section">
                <div id="error-container"></div>
                <div id="success-container"></div>

                <div class="game-info">
                    <div class="player-count">
                        Players: <span id="player-count">0</span>/4
                    </div>
                    <div class="lobby-leader">
                        Leader: <span id="lobby-leader">None</span>
                    </div>
                </div>

                <div class="seats-container">
                    <div class="seat seat-upper" data-seat="0">
                        <div class="seat-number">Seat 1</div>
                        <div class="seat-content">
            <div class="empty-seat">Click to sit</div>
            <button class="add-bot-seat-btn btn info hidden" data-add-bot-seat="0">Add Bot</button>
            <button class="remove-bot-btn btn danger hidden" data-remove-bot-seat="0">Remove Bot</button>
                        </div>
                    </div>
                    <div class="seat seat-right" data-seat="1">
                        <div class="seat-number">Seat 2</div>
                        <div class="seat-content">
            <div class="empty-seat">Click to sit</div>
            <button class="add-bot-seat-btn btn info hidden" data-add-bot-seat="1">Add Bot</button>
            <button class="remove-bot-btn btn danger hidden" data-remove-bot-seat="1">Remove Bot</button>
                        </div>
                    </div>
                    <div class="lobby-controls">
                        <button id="leave-seat-btn" class="btn danger hidden">
                            Leave Seat
                        </button>
                        <button id="toggle-video-btn" class="btn primary hidden">
                            üìπ Enable Camera
                        </button>
                        <button id="ready-btn" class="btn success hidden">
                            Ready
                        </button>
                        <button id="start-game-btn" class="btn success hidden">
                            Start Game
                        </button>
                    </div>
                    
                    <div class="seat seat-lower" data-seat="2">
                        <div class="seat-number">Seat 3</div>
                        <div class="seat-content">
            <div class="empty-seat">Click to sit</div>
            <button class="add-bot-seat-btn btn info hidden" data-add-bot-seat="2">Add Bot</button>
            <button class="remove-bot-btn btn danger hidden" data-remove-bot-seat="2">Remove Bot</button>
                        </div>
                    </div>
                    <div class="seat seat-left" data-seat="3">
                        <div class="seat-number">Seat 4</div>
                        <div class="seat-content">
            <div class="empty-seat">Click to sit</div>
            <button class="add-bot-seat-btn btn info hidden" data-add-bot-seat="3">Add Bot</button>
            <button class="remove-bot-btn btn danger hidden" data-remove-bot-seat="3">Remove Bot</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="game-section" class="hidden">
                <div class="game-seats-container">
                    <div class="game-seat game-seat-upper"></div>
                    <div class="game-seat game-seat-left"></div>
                    <div class="game-seat game-seat-center">
                        <div id="trick-area" class="hidden"></div>
                        <div id="pass-arrow-container" class="hidden" style="text-align:center;margin-top:1.2rem;">
<                        </div>
                    </div>
                    <div class="game-seat game-seat-right"></div>
                    <div class="game-seat game-seat-hand">
                        <!-- <div id="hand-area" style="text-align: center;"></div> -->
                    </div>
                </div>
                <!-- <div id="trick-area" style="margin: 2rem 0; text-align: center;"></div> -->
            </div>

            <!-- Modal overlay for history -->
            <div id="history-modal" class="hidden" role="dialog" aria-modal="true" aria-labelledby="history-title">
                <div id="history-modal-backdrop"></div>
                <div id="history-modal-content" role="document" tabindex="-1">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                        <h3 id="history-title" style="margin:0;">Game History</h3>
                        <div><button id="close-history-btn" class="btn">Close</button></div>
                    </div>
                    <div id="history-container" style="max-height:60vh;overflow:auto;padding:8px;border-radius:6px;">
                        <div id="history-list">Loading history...</div>
                    </div>
                </div>
            </div>

            <!-- End Game Animation Overlay -->
            <div id="end-game-modal" class="hidden" role="dialog" aria-modal="true" aria-labelledby="end-game-title">
                <div id="end-game-modal-backdrop"></div>
                <div id="end-game-modal-content" role="document" tabindex="-1">
                    <div class="end-game-animation">
                        <!-- Confetti Animation -->
                        <div id="confetti-container"></div>
                        
                        <!-- Winner Announcement -->
                        <div class="winner-announcement">
                            <div class="trophy-icon">üèÜ</div>
                            <h2 id="end-game-title" class="winner-title">Game Complete!</h2>
                            <div id="winner-name" class="winner-name"></div>
                        </div>
                        
                        <!-- Player Rankings -->
                        <div class="player-rankings">
                            <h3 class="rankings-title">Final Rankings</h3>
                            <div id="rankings-list" class="rankings-list"></div>
                        </div>
                        
                        <!-- Return Button -->
                        <div class="end-game-actions">
                            <button id="return-to-lobby-btn" class="btn primary large">Return to Lobby</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game history modal trigger (overlay will be used) -->
    <div style="margin-top:0.2rem;max-width:900px;">
        <button id="toggle-history-btn" class="btn info" style="margin-bottom:8px;">Show Game History</button>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="hearts-game.js"></script>
    <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>
</body>
</html>
